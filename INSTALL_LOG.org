* Steps to install, configure, and demonstrate Marimo
:PROPERTIES:
:header-args: :cmdline "2>&1" :wrap example
:ID:       0E1B153D-808F-455D-8A7E-9EA30C9C8783
:END:

- I want to do everything using uv, with the "modern" approach
- This is unlike the examples given in the marimo documentation, which use uv but in the legacy pip-compatible mode
** DONE Initial setup
CLOSED: [2025-02-08 Sat 18:49]
:LOGBOOK:
- State "DONE"       from "TODO"       [2025-02-08 Sat 18:49] \\
  So far, so good
:END:
First I check that uv is up to date
#+begin_src fish
  uv self update
#+end_src

#+RESULTS:

#+begin_example
  info: Checking for updates...
  success: Upgraded uv from v0.5.13 to v0.5.29! https://github.com/astral-sh/uv/releases/tag/0.5.29
#+end_example

Then initialize a project in the current directory

#+begin_src fish
  uv init
#+end_src

#+RESULTS:

#+begin_example
  Initialized project `dawgi-marimo-talk`
#+end_example


#+begin_src fish :results verbatim
  ls
#+end_src

#+RESULTS:

#+begin_example
  INSTALL_LOG.org
  LICENSE
  README.md
  hello.py
  pyproject.toml
  uv.lock
#+end_example

Test that the python script can run

#+begin_src fish
  uv run hello.py
#+end_src

#+RESULTS:

#+begin_example
  Hello from dawgi-marimo-talk!
#+end_example
** DONE Make sure marimo is installed
CLOSED: [2025-02-08 Sat 22:04]
I was wondering which of two approaches to use:
1. Add all dependencies to the whole project (in pyproject.toml)
2. Add the dependencies to a the notebook or script that needs them (in header of file a la PEP 722)


First I will try the whole project approach. (Note that I had to use the :cmdline header argument to merge stderr and sdout in the source block outputs - see PROPERTIES block in the [[id:0E1B153D-808F-455D-8A7E-9EA30C9C8783][top-level header]])

#+begin_src fish
  uv add marimo
#+end_src

#+RESULTS:

#+begin_example
  Resolved 25 packages in 1.43s
  Downloading jedi (1.5MiB)
  Downloading pygments (1.2MiB)
  Downloading marimo (10.4MiB)
  Downloading ruff (10.6MiB)
  Downloading pycrdt (1.6MiB)
   Downloaded pygments
   Downloaded pycrdt
   Downloaded jedi
   Downloaded ruff
   Downloaded marimo
  Prepared 23 packages in 1.69s
  Installed 23 packages in 35ms
   + anyio==4.8.0
   + click==8.1.8
   + docutils==0.21.2
   + h11==0.14.0
   + idna==3.10
   + itsdangerous==2.2.0
   + jedi==0.19.2
   + marimo==0.11.0
   + markdown==3.7
   + narwhals==1.25.2
   + packaging==24.2
   + parso==0.8.4
   + psutil==6.1.1
   + pycrdt==0.11.1
   + pygments==2.19.1
   + pymdown-extensions==10.14.3
   + pyyaml==6.0.2
   + ruff==0.9.5
   + sniffio==1.3.1
   + starlette==0.45.3
   + tomlkit==0.13.2
   + uvicorn==0.34.0
   + websockets==14.2
  [ Babel evaluation exited with code 0 ]
#+end_example

We also add astropy since we are sure to need it

#+begin_src fish :results verbatim
  uv add astropy 
#+end_src

#+RESULTS:

#+begin_example
Resolved 29 packages in 193ms
Installed 4 packages in 39ms
 + astropy==7.0.1
 + astropy-iers-data==0.2025.2.3.0.32.42
 + numpy==2.2.2
 + pyerfa==2.0.1.5
#+end_example


